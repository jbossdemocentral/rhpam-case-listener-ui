<!--
=========================================================
* Argon Dashboard - v1.2.0
=========================================================
* Product Page: https://www.creative-tim.com/product/argon-dashboard


* Copyright  Creative Tim (http://www.creative-tim.com)
* Coded by www.creative-tim.com



=========================================================
* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html>

<head>

  <link rel="stylesheet" href="css/patternfly.min.css">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/patternfly-additions.min.css">
  <link rel="stylesheet" href="css/mystyles.css">
  <link rel="stylesheet" href="css/patternfly.css">
  <link rel="stylesheet" href="css/patternfly-additions.min.css">
  <script src="components/c3/c3.min.js"></script>
  <script src="components/d3/d3.min.js"></script>

  <!-- Bootstrap base + PatternFly extensions + Your styles -->
  <link rel="stylesheet" href="css/mystyles.css">

  <!-- JS -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/patternfly.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>



</head>

<body ng-app="myApp" ng-controller="FormController">
  <!-- Sidenav -->
  <nav class="navbar navbar-default navbar-pf" role="navigation">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        <h2>Acme Corporation</h2>

      </a>
    </div>
    <div class="collapse navbar-collapse navbar-collapse-1">
      <ul class="nav navbar-nav navbar-utility">

        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <span class="pficon pficon-user"></span>
            Agent Login <b class="caret"></b>
          </a>
          <ul class="dropdown-menu">
            <li>
              <a href="#">Link</a>
            </li>
            <li>
              <a href="#">Another link</a>
            </li>
            <li>
              <a href="#">Something else here</a>
            </li>
            <li class="divider"></li>
            <li class="dropdown-submenu">
              <a tabindex="-1" href="#">More options</a>
              <ul class="dropdown-menu">
                <li>
                  <a href="#">Link</a>
                </li>
                <li>
                  <a href="#">Another link</a>
                </li>
                <li>
                  <a href="#">Something else here</a>
                </li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li>
                  <a href="#">Separated link</a>
                </li>
                <li class="divider"></li>
                <li>
                  <a href="#">One more separated link</a>
                </li>
              </ul>
            </li>
            <li class="divider"></li>

          </ul>
        </li>
      </ul>
      <ul class="nav navbar-nav navbar-primary">
        <li>
          <a href="#">Market Risk > Admin</a>
        </li>

      </ul>
    </div>
  </nav>
  <!-- Main content -->



    <!-- Page content -->

  <div class="container-fluid container-cards-pf">


      <div class="col-xs-12 col-lg-12 col-md-5">
        <div class="card-pf">
          <div class="card-pf-heading">
            <div class="col-md-12 col-md-12 col-md-12">
              <div class="container-fluid container-cards-pf">
                <h3>Current Process Status</h3>
                  <div width="54px" height="54px"  id="svgDiv"></div>

                  <h3>Process Variables</h3>


                    <!-- Projects table -->
                    <table class="table table-striped table-bordered table-hover" >
                      <thead>
                      <th><h4>Property</h4></th>
                      <th><h4>Value</h4></th>
                      </thead>
                      <tr ng-repeat='(key, value) in processVariables'>
                        <td >{{key}}</td> <td ng-show="value!=='null'" >{{value}}</td> <td ng-show="value==='null'" ></td>


                      </tr>
                    </table>
                    <hr/>
                    <h3 >Task Details</h3>

                    <div>
                      <!-- Projects table -->
                      <table class="table table-striped table-bordered table-hover" >
                        <thead>
                        <th><h4>Task Id</h4></th>
                        <th><h4>Task Name</h4></th>
                        <th><h4>Task Owner</h4></th>
                        <th><h4>Task Status</h4></th>
                        </thead>
                        <tr ng-repeat='x in taskList'>
                          <td >{{x.taskId}}</td>
                          <td >{{x.taskName}}</td>
                          <td >{{x.owner}}</td>
                          <td >{{x.status}}</td>
                        </tr>
                      </table>


                </div>

              </div>
            </div>


        </div>

      </div>
      <!-- Footer -->

    </div>
  </div>
  <!-- Argon Scripts -->
  <!-- Core -->
  <script src="../assets/vendor/jquery/dist/jquery.min.js"></script>
  <script src="../assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/js-cookie/js.cookie.js"></script>
  <script src="../assets/vendor/jquery.scrollbar/jquery.scrollbar.min.js"></script>
  <script src="../assets/vendor/jquery-scroll-lock/dist/jquery-scrollLock.min.js"></script>
  <!-- Optional JS -->
  <script src="../assets/vendor/chart.js/dist/Chart.min.js"></script>
  <script src="../assets/vendor/chart.js/dist/Chart.extension.js"></script>
  <!-- Argon JS -->
  <script src="../assets/js/argon.js?v=1.2.0"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

  <script>

      var app = angular.module('myApp', []);
      app.controller('FormController', function($scope,$http) {



      var baseURL = window.location.protocol + '//' + window.location.host;


var queryString = window.location.search;
var urlParams = new URLSearchParams(queryString);
var product = urlParams.get('txnId')


         $http({
              url: baseURL+"/transaction/svg/"+product,
              method: "GET",
              headers: new Headers({ 'Content-Type': 'application/application/json' })

          })
          .then(function(response) {

                $scope.processVariables = response.data.processVariables;
                 $scope.svg =response.data.svg;
                $scope.taskList = response.data.taskList;
                 document.getElementById("svgDiv").innerHTML=$scope.svg;

          },
          function(response) { // optional

                  // failed
                  console.log (JSON.stringify (response, null, 2));

          });



      });



 </script>
</body>

</html>